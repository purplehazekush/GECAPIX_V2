<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Loja GECA - Vis√£o do Aluno</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome & Google Fonts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        slate: {
                            850: '#151f32',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        cyan: {
                            400: '#22d3ee',
                            500: '#06b6d4',
                            900: '#164e63',
                        },
                        pink: {
                            500: '#ec4899',
                            600: '#db2777',
                        }
                    },
                    animation: {
                        'slide-up': 'slideUp 0.3s ease-out forwards',
                        'slide-down': 'slideDown 0.3s ease-out forwards',
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(100%)' },
                            '100%': { transform: 'translateY(0)' },
                        },
                        slideDown: {
                            '0%': { transform: 'translateY(0)' },
                            '100%': { transform: 'translateY(100%)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        body {
            background-color: #020617; /* Slate 950 */
            color: white;
            -webkit-tap-highlight-color: transparent;
        }

        /* Glassmorphism utilities */
        .glass {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-modal {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(34, 211, 238, 0.2);
        }

        /* Custom Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #22d3ee;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #22d3ee;
        }
    </style>
</head>
<body class="antialiased min-h-screen pb-32">

    <!-- MAX WIDTH CONTAINER (Mobile Simulation on Desktop) -->
    <div class="max-w-lg mx-auto relative min-h-screen bg-slate-950 shadow-2xl overflow-hidden">

        <!-- 1. HEADER STICKY -->
        <header class="glass sticky top-0 z-40 px-4 py-3 flex justify-between items-center shadow-lg">
            <div>
                <h1 class="text-2xl font-black italic tracking-tighter text-white">
                    LOJA <span class="text-pink-500">GECA</span>
                </h1>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">
                    Aberto at√© 04:00
                </p>
            </div>
            
            <!-- Wallet Display -->
            <div class="flex gap-2">
                <div class="bg-slate-900 border border-slate-700 rounded-lg px-2 py-1 flex items-center gap-1.5">
                    <i class="fas fa-coins text-yellow-400 text-xs"></i>
                    <span class="text-xs font-black text-white" id="user-coins">1.250</span>
                </div>
                <div class="bg-slate-900 border border-slate-700 rounded-lg px-2 py-1 flex items-center gap-1.5">
                    <i class="fas fa-flask text-pink-400 text-xs"></i>
                    <span class="text-xs font-black text-white" id="user-glue">3</span>
                </div>
            </div>
        </header>

        <!-- 2. HERO BANNER -->
        <div class="p-4">
            <div class="relative w-full h-40 rounded-3xl overflow-hidden shadow-2xl border border-slate-800 group">
                <!-- Background Image -->
                <img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=800&auto=format&fit=crop" class="w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700" alt="Party">
                
                <!-- Overlay Gradient -->
                <div class="absolute inset-0 bg-gradient-to-r from-pink-900/90 via-transparent to-transparent"></div>
                
                <!-- Content -->
                <div class="absolute bottom-4 left-4 max-w-[70%]">
                    <span class="bg-yellow-400 text-black text-[10px] font-black px-2 py-0.5 rounded uppercase mb-1 inline-block">Destaque</span>
                    <h2 class="text-2xl font-black italic leading-none uppercase text-white drop-shadow-lg">
                        Calourada 2026
                    </h2>
                    <p class="text-xs text-pink-200 mt-1 font-medium">Ingressos Lote 1 liberados!</p>
                </div>
            </div>
        </div>

        <!-- 3. FILTROS (Horizontal Scroll) -->
        <div class="px-4 mb-6">
            <div class="flex gap-2 overflow-x-auto no-scrollbar pb-2">
                <button class="filter-btn bg-white text-slate-950 px-4 py-2 rounded-full text-xs font-black uppercase whitespace-nowrap shadow-lg scale-105 transition-transform">
                    Todos
                </button>
                <button class="filter-btn bg-slate-900 border border-slate-800 text-slate-400 px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap hover:bg-slate-800 hover:text-white transition-colors">
                    üç∫ Cerveja
                </button>
                <button class="filter-btn bg-slate-900 border border-slate-800 text-slate-400 px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap hover:bg-slate-800 hover:text-white transition-colors">
                    ü•É Destilados
                </button>
                <button class="filter-btn bg-slate-900 border border-slate-800 text-slate-400 px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap hover:bg-slate-800 hover:text-white transition-colors">
                    üëï Merch
                </button>
                <button class="filter-btn bg-slate-900 border border-slate-800 text-slate-400 px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap hover:bg-slate-800 hover:text-white transition-colors">
                    üéüÔ∏è Ingressos
                </button>
            </div>
        </div>

        <!-- 4. GRID DE PRODUTOS -->
        <div class="px-4 pb-24 grid grid-cols-2 gap-4" id="products-grid">
            <!-- Products will be injected by JS -->
        </div>

        <!-- 5. FLOATING CART TAB (Mini Resumo) -->
        <div id="mini-cart" class="fixed bottom-4 left-4 right-4 z-40 transform translate-y-24 transition-transform duration-300">
            <div onclick="openDrawer()" class="bg-cyan-600 hover:bg-cyan-500 text-white p-4 rounded-2xl shadow-2xl shadow-cyan-900/50 flex justify-between items-center cursor-pointer border border-cyan-400/30">
                <div class="flex items-center gap-3">
                    <div class="bg-white/20 w-10 h-10 rounded-xl flex items-center justify-center font-black animate-pulse">
                        <span id="cart-count">0</span>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[10px] uppercase font-bold opacity-80">Total a Pagar</span>
                        <span class="text-lg font-black leading-none" id="cart-total">R$ 0,00</span>
                    </div>
                </div>
                <div class="flex items-center gap-2 font-bold text-sm uppercase">
                    Ver Sacola <i class="fas fa-chevron-up"></i>
                </div>
            </div>
        </div>

        <!-- 6. CHECKOUT DRAWER (MODAL) -->
        <div id="backdrop" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden opacity-0 transition-opacity duration-300" onclick="closeDrawer()"></div>
        
        <div id="drawer" class="fixed bottom-0 left-0 right-0 z-50 glass-modal rounded-t-[2.5rem] transform translate-y-full transition-transform duration-300 max-w-lg mx-auto h-[85vh] flex flex-col">
            
            <!-- Handle bar -->
            <div class="w-full flex justify-center pt-3 pb-1" onclick="closeDrawer()">
                <div class="w-12 h-1.5 bg-slate-700 rounded-full"></div>
            </div>

            <!-- Header Drawer -->
            <div class="px-6 py-4 border-b border-slate-800">
                <h2 class="text-2xl font-black italic uppercase text-white flex items-center gap-2">
                    Checkout <i class="fas fa-shopping-bag text-cyan-400"></i>
                </h2>
            </div>

            <!-- Scrollable Content -->
            <div class="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar relative">
                
                <!-- Items List -->
                <div id="drawer-items" class="space-y-4">
                    <!-- Items injected by JS -->
                </div>

                <!-- Gamification Toggle -->
                <div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-4 flex items-center justify-between shadow-lg">
                    <div class="flex items-center gap-3">
                        <div class="bg-yellow-500/20 p-2 rounded-lg text-yellow-400">
                            <i class="fas fa-coins text-xl"></i>
                        </div>
                        <div>
                            <p class="text-xs font-bold text-slate-300 uppercase">Usar GecaCoins</p>
                            <p class="text-[10px] text-slate-500">Saldo: 1.250</p>
                        </div>
                    </div>
                    
                    <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                        <input type="checkbox" name="toggle" id="coin-toggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-700 transition-all duration-300"/>
                        <label for="coin-toggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-700 cursor-pointer transition-colors duration-300"></label>
                    </div>
                </div>
                <p id="discount-msg" class="text-center text-[10px] text-emerald-400 font-bold hidden opacity-0 transition-opacity">
                    Desconto de R$ 5,00 aplicado! (-500 Coins)
                </p>

                <!-- Pix & Timer Area (Hidden initially) -->
                <div id="pix-area" class="hidden text-center space-y-4 animate-fade-in">
                    <div class="bg-white p-4 rounded-2xl inline-block mx-auto border-4 border-cyan-500 shadow-[0_0_30px_rgba(34,211,238,0.3)]">
                        <!-- Mock QR Code -->
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=PagamentoGecaStore" alt="QR Code" class="rounded-lg">
                    </div>
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase mb-1">Expira em</p>
                        <p class="text-2xl font-black text-cyan-400 font-mono" id="timer">15:00</p>
                    </div>
                    <button class="w-full bg-slate-800 hover:bg-slate-700 text-slate-300 py-3 rounded-xl font-bold text-xs uppercase flex items-center justify-center gap-2 border border-slate-700">
                        <i class="far fa-copy"></i> Copiar C√≥digo PIX
                    </button>
                    
                    <!-- Simulation Button for prototype -->
                    <button onclick="simulateSuccess()" class="text-[10px] text-slate-600 underline mt-4">
                        (Simular Confirma√ß√£o do Banco)
                    </button>
                </div>
                
                <!-- Success Area -->
                <div id="success-area" class="hidden text-center flex flex-col items-center justify-center h-full py-10">
                    <div class="w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center text-white text-4xl mb-4 shadow-lg shadow-emerald-500/50 animate-bounce">
                        <i class="fas fa-check"></i>
                    </div>
                    <h3 class="text-2xl font-black text-white italic uppercase mb-2">Pagamento Confirmado!</h3>
                    <p class="text-slate-400 text-sm mb-6">Pode retirar no balc√£o.</p>
                    
                    <div class="bg-slate-800 rounded-xl p-4 w-full flex justify-between items-center border border-slate-700">
                        <span class="text-xs font-bold text-slate-400 uppercase">Cashback</span>
                        <span class="text-lg font-black text-yellow-400 flex items-center gap-1">
                            +150 XP <i class="fas fa-bolt"></i>
                        </span>
                    </div>
                </div>

            </div>

            <!-- Footer Actions (Summary & Pay) -->
            <div id="drawer-footer" class="p-6 bg-slate-900 border-t border-slate-800">
                <div class="flex justify-between items-end mb-4">
                    <span class="text-slate-400 text-xs font-bold uppercase">Total</span>
                    <span class="text-3xl font-black text-white" id="drawer-total">R$ 0,00</span>
                </div>
                <button onclick="startPixFlow()" class="w-full bg-emerald-500 hover:bg-emerald-400 text-white py-4 rounded-2xl font-black text-lg uppercase shadow-lg shadow-emerald-900/50 active:scale-95 transition-all flex items-center justify-center gap-2 group">
                    <span>Pagar com Pix</span>
                    <i class="fas fa-bolt group-hover:animate-pulse"></i>
                </button>
            </div>
        </div>

    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. MOCK DATA ---
        const products = [
            { 
                id: 1, 
                name: "Heineken Long Neck", 
                price: 12.00, 
                image: "https://images.unsplash.com/photo-1623594225232-2d076d33969e?q=80&w=400&auto=format&fit=crop", 
                cashback: "50 XP",
                badge: null 
            },
            { 
                id: 2, 
                name: "Combo Vodka + Energ√©tico", 
                price: 35.00, 
                image: "https://images.unsplash.com/photo-1595981267035-7b04ca84a82d?q=80&w=400&auto=format&fit=crop", 
                cashback: "150 XP",
                badge: "Popular" 
            },
            { 
                id: 3, 
                name: "Ingresso Calourada (Lote 1)", 
                price: 45.00, 
                image: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?q=80&w=400&auto=format&fit=crop", 
                cashback: "200 XP",
                badge: "Lote 1" 
            },
            { 
                id: 4, 
                name: "√Ågua sem G√°s", 
                price: 5.00, 
                image: "https://images.unsplash.com/photo-1548839140-29a749e1cf4d?q=80&w=400&auto=format&fit=crop", 
                cashback: "10 XP",
                badge: null 
            },
            { 
                id: 5, 
                name: "Copo Tirante GECA", 
                price: 15.00, 
                image: "https://images.unsplash.com/photo-1577303080007-4384d72863eb?q=80&w=400&auto=format&fit=crop", 
                cashback: "Item Raro",
                badge: "Merch" 
            },
             { 
                id: 6, 
                name: "Corote Sabores", 
                price: 8.00, 
                image: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=400&auto=format&fit=crop", 
                cashback: "30 XP",
                badge: null 
            }
        ];

        // State
        const cart = {}; // { id: qty }
        let discountApplied = false;
        
        // --- 2. RENDER FUNCTIONS ---
        const grid = document.getElementById('products-grid');

        function renderProducts() {
            grid.innerHTML = products.map(p => `
                <div class="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden flex flex-col shadow-lg relative group">
                    ${p.badge ? `<div class="absolute top-2 left-2 bg-pink-600 text-white text-[9px] font-black uppercase px-2 py-1 rounded shadow-lg z-10">${p.badge}</div>` : ''}
                    
                    <div class="relative h-32 w-full overflow-hidden bg-black">
                        <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover opacity-80 group-hover:scale-110 transition-transform duration-500">
                    </div>
                    
                    <div class="p-3 flex flex-col flex-1">
                        <div class="flex-1">
                            <h3 class="text-white text-sm font-bold leading-tight mb-1">${p.name}</h3>
                            <p class="text-xs text-emerald-400 font-bold mb-2 flex items-center gap-1">
                                <i class="fas fa-bolt text-[10px]"></i> ${p.cashback}
                            </p>
                        </div>
                        
                        <div class="mt-2 flex items-center justify-between">
                            <span class="text-white font-black text-lg">R$ ${p.price.toFixed(2).replace('.',',')}</span>
                        </div>

                        <!-- Add Controls -->
                        <div class="mt-3 bg-slate-800 rounded-xl flex items-center justify-between p-1 border border-slate-700">
                            <button onclick="updateQty(${p.id}, -1)" class="w-10 h-10 flex items-center justify-center bg-slate-700 hover:bg-slate-600 text-white rounded-lg active:scale-90 transition-all">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="font-black text-lg w-8 text-center" id="qty-${p.id}">0</span>
                            <button onclick="updateQty(${p.id}, 1)" class="w-10 h-10 flex items-center justify-center bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg shadow-lg active:scale-90 transition-all">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // --- 3. LOGIC ---
        function updateQty(id, change) {
            if (!cart[id]) cart[id] = 0;
            cart[id] += change;
            if (cart[id] < 0) cart[id] = 0;
            
            // Update UI Number
            document.getElementById(`qty-${id}`).innerText = cart[id];
            
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            let count = 0;
            
            Object.keys(cart).forEach(key => {
                const qty = cart[key];
                if(qty > 0) {
                    const product = products.find(p => p.id == key);
                    total += product.price * qty;
                    count += qty;
                }
            });

            // Update Mini Cart
            document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2).replace('.',',')}`;
            document.getElementById('cart-count').innerText = count;

            const miniCart = document.getElementById('mini-cart');
            if (count > 0) {
                miniCart.classList.remove('translate-y-24');
            } else {
                miniCart.classList.add('translate-y-24');
            }

            return total;
        }

        // --- 4. DRAWER LOGIC ---
        function openDrawer() {
            const backdrop = document.getElementById('backdrop');
            const drawer = document.getElementById('drawer');
            const list = document.getElementById('drawer-items');
            
            // Reset Views
            document.getElementById('drawer-items').classList.remove('hidden');
            document.getElementById('drawer-footer').classList.remove('hidden');
            document.getElementById('pix-area').classList.add('hidden');
            document.getElementById('success-area').classList.add('hidden');

            // Render List
            let html = '';
            let total = 0;
            
            Object.keys(cart).forEach(key => {
                const qty = cart[key];
                if(qty > 0) {
                    const p = products.find(item => item.id == key);
                    total += p.price * qty;
                    html += `
                        <div class="flex items-center justify-between border-b border-slate-800 pb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center text-xs font-bold border border-slate-700">
                                    ${qty}x
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-white">${p.name}</p>
                                    <p class="text-xs text-slate-500">R$ ${p.price.toFixed(2)} uni</p>
                                </div>
                            </div>
                            <span class="font-black text-white">R$ ${(p.price * qty).toFixed(2).replace('.',',')}</span>
                        </div>
                    `;
                }
            });
            list.innerHTML = html;
            updateDrawerTotal(total);

            // Show
            backdrop.classList.remove('hidden');
            // Timeout to allow display:block to apply before opacity transition
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                drawer.classList.remove('translate-y-full');
            }, 10);
        }

        function closeDrawer() {
            const backdrop = document.getElementById('backdrop');
            const drawer = document.getElementById('drawer');

            drawer.classList.add('translate-y-full');
            backdrop.classList.add('opacity-0');
            
            setTimeout(() => {
                backdrop.classList.add('hidden');
            }, 300);
            
            // Reset discount toggle
            document.getElementById('coin-toggle').checked = false;
            handleDiscount(false);
        }

        // --- 5. GAMIFICATION & CHECKOUT ---
        const coinToggle = document.getElementById('coin-toggle');
        
        coinToggle.addEventListener('change', (e) => {
            handleDiscount(e.target.checked);
        });

        function handleDiscount(active) {
            discountApplied = active;
            const msg = document.getElementById('discount-msg');
            const totalDisplay = document.getElementById('drawer-total');
            let currentTotal = calculateTotal();

            if (active) {
                msg.classList.remove('hidden');
                setTimeout(() => msg.classList.remove('opacity-0'), 10);
                currentTotal = Math.max(0, currentTotal - 5);
            } else {
                msg.classList.add('opacity-0');
                setTimeout(() => msg.classList.add('hidden'), 300);
            }
            
            totalDisplay.innerText = `R$ ${currentTotal.toFixed(2).replace('.',',')}`;
        }

        function updateDrawerTotal(val) {
             document.getElementById('drawer-total').innerText = `R$ ${val.toFixed(2).replace('.',',')}`;
        }

        function startPixFlow() {
            // UI Transition
            document.getElementById('drawer-items').classList.add('hidden');
            document.getElementById('drawer-footer').classList.add('hidden');
            document.getElementById('pix-area').classList.remove('hidden');
            
            // Timer Logic
            let time = 15 * 60; // 15 min
            const timerEl = document.getElementById('timer');
            
            const interval = setInterval(() => {
                const m = Math.floor(time / 60);
                const s = time % 60;
                timerEl.innerText = `${m}:${s < 10 ? '0'+s : s}`;
                time--;
                if(time < 0) clearInterval(interval);
            }, 1000);
        }

        function simulateSuccess() {
            document.getElementById('pix-area').classList.add('hidden');
            document.getElementById('success-area').classList.remove('hidden');
            
            // Confetti Effect
            const duration = 3000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#22d3ee', '#ec4899', '#facc15'] // Brand colors
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#22d3ee', '#ec4899', '#facc15']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // Init
        renderProducts();

    </script>
</body>
</html>